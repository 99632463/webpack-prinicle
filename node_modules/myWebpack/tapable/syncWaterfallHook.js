class SyncWaterfallHook {
  constructor(args) {
    this.tasks = [];
    this.args = args;
  }

  tap(name, fn) {
    this.tasks.push(fn);
  }

  call(...args) {
    if (args.length < this.args.length) {
      throw new Error('发布个数少了');
    }

    args = args.slice(0, this.args.length);

    const [firstTask, ...otherTasks] = this.tasks;
    let result = firstTask(...args);
    otherTasks.forEach(task => {
      result = task(result);
    })
  }
}